import{G as $,r as B,$ as I,c as p,h as y,A as C,ab as P,P as D,_ as q,m as N,q as T,j as m,k as b,ao as U,s as k,t as a,v as u,d as s,x as i,al as g,y as x,Q as V,am as F,F as Q,u as A,a0 as S,o as j,ap as O,ai as E,aO as G,D as M,E as H}from"./index.8d2c1b60.js";import{Q as f,a as r}from"./QItemLabel.86396600.js";import{Q as R}from"./QItem.ada3ccb9.js";import{I as z,_ as J}from"./UserArch.30e20d1c.js";import"./use-dark.971e675a.js";import"./QImg.74e7b2de.js";import"./QTooltip.47c35e20.js";import"./position-engine.e758a05e.js";import"./use-timeout.2a840c59.js";import"./scroll.8f0bebbd.js";var K=$({name:"QIntersection",props:{tag:{type:String,default:"div"},once:Boolean,transition:String,transitionDuration:{type:[String,Number],default:300},ssrPrerender:Boolean,margin:String,threshold:[Number,Array],root:{default:null},disable:Boolean,onVisibility:Function},setup(e,{slots:d,emit:l}){const n=B(I.value===!0?e.ssrPrerender:!1),v=p(()=>e.root!==void 0||e.margin!==void 0||e.threshold!==void 0?{handler:c,cfg:{root:e.root,rootMargin:e.margin,threshold:e.threshold}}:c),_=p(()=>e.disable!==!0&&(I.value!==!0||e.once!==!0||e.ssrPrerender!==!0)),t=p(()=>[[z,v.value,void 0,{once:e.once}]]),o=p(()=>`--q-transition-duration: ${e.transitionDuration}ms`);function c(h){n.value!==h.isIntersecting&&(n.value=h.isIntersecting,e.onVisibility!==void 0&&l("visibility",n.value))}function w(){if(n.value===!0)return[y("div",{key:"content",style:o.value},D(d.default))];if(d.hidden!==void 0)return[y("div",{key:"hidden",style:o.value},d.hidden())]}return()=>{const h=e.transition?[y(C,{name:"q-transition--"+e.transition},w)]:w();return P(e.tag,{class:"q-intersection"},h,"main",_.value,()=>t.value)}}});const W={class:"arch-wrapper bgea"},X=["src"],Y={__name:"UserList",props:{userList:{type:Array,default:()=>[]}},emits:["follow"],setup(e){const d=e,l=N();return(n,v)=>{const _=T("router-link");return m(!0),b(Q,null,U(d.userList,t=>(m(),k(K,{key:t._id,transition:"flip-right",style:{height:"200px",width:"80%"},once:""},{default:a(()=>[u("div",W,[s(R,{class:"row"},{default:a(()=>[s(f,{class:"col-auto",avatar:""},{default:a(()=>[s(_,{to:`/profile/${t.username}/recent`},{default:a(()=>[u("img",{class:"round q-pa-lg",style:{width:"100%"},src:t.avatar},null,8,X)]),_:2},1032,["to"])]),_:2},1024),s(f,{class:"col-3"},{default:a(()=>[s(r,{style:{"font-weight":"800"},class:"title2 text-bold"},{default:a(()=>[i(g(t.username),1)]),_:2},1024),t.username!==x(l).username?(m(),k(r,{key:0,style:{"margin-top":"10px !important"}},{default:a(()=>{var o,c;return[s(V,{class:"text-black",label:((o=t.followers)==null?void 0:o.indexOf(x(l)._id))!==-1?"followed":"follow",color:((c=t.followers)==null?void 0:c.indexOf(x(l)._id))!==-1?"light-green-14":"white",onClick:w=>n.$emit("follow",t.username)},null,8,["label","color","onClick"])]}),_:2},1024)):F("",!0)]),_:2},1024),s(f,{class:"col text-center"},{default:a(()=>[s(r,{class:"text-bold"},{default:a(()=>[i(g(t.watched),1)]),_:2},1024),s(r,null,{default:a(()=>[i("films")]),_:1})]),_:2},1024),s(f,{class:"col text-center"},{default:a(()=>[s(r,{class:"text-bold"},{default:a(()=>[i(g(t.reviewed),1)]),_:2},1024),s(r,null,{default:a(()=>[i("reviews")]),_:1})]),_:2},1024),s(f,{class:"col text-center"},{default:a(()=>[s(r,{class:"text-bold"},{default:a(()=>{var o;return[i(g((o=t.followers)==null?void 0:o.length),1)]}),_:2},1024),s(r,null,{default:a(()=>[i("followers")]),_:1})]),_:2},1024),s(f,{class:"col text-center"},{default:a(()=>[s(r,{class:"text-bold"},{default:a(()=>{var o;return[i(g((o=t.following)==null?void 0:o.length),1)]}),_:2},1024),s(r,null,{default:a(()=>[i("following")]),_:1})]),_:2},1024)]),_:2},1024)])]),_:2},1024))),128)}}};var L=q(Y,[["__scopeId","data-v-3f9147ac"]]);const Z=e=>(M("data-v-3ba13d5a"),e=e(),H(),e),ee={class:"row flex-center",style:{"overflow-x":"clip"}},te={class:"col-12 col-md-8"},se=Z(()=>u("div",{class:"titles"},"Top Users",-1)),ae={class:"row q-gutter-lg gt-sm"},oe={class:"q-pt-md flex justify-center w100 q-gutter-y-lg lt-md"},le={class:"q-pt-md flex justify-center w100 q-gutter-y-lg"},ne={__name:"TopUsers",setup(e){const d=A(),l=S([]),n=S([]),v=async t=>{await O.post("users/follow",{username:t}),_()},_=async()=>{const{data:t}=await E.get("users/pop");l.splice(0,l.length,...t.top3),n.splice(0,n.length,...t.top20)};return j(async()=>{await _(),d.isLoading=!1}),(t,o)=>(m(),b("div",ee,[u("div",te,[se,u("div",ae,[(m(!0),b(Q,null,U(l,c=>(m(),k(J,G({key:c.username},c,{class:"col"}),null,16))),128))]),u("div",oe,[s(L,{userList:l,onFollow:v},null,8,["userList"])]),u("div",le,[s(L,{userList:n,onFollow:v},null,8,["userList"])])])]))}};var he=q(ne,[["__scopeId","data-v-3ba13d5a"]]);export{he as default};
