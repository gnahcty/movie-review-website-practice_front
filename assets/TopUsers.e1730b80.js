import{z as B,r as C,V as I,c as p,h as y,I as $,a6 as P,J as V,aH as q,u as N,p as T,j as f,k as b,aj as U,q as k,s,t as u,d as t,v as d,ag as g,x,Q as D,ah as F,F as Q,W as S,o as j,ak as A,ad as M,aK as H,aL as O,aM as z}from"./index.94f685bf.js";import{Q as _,a as n}from"./QItemLabel.4aa98ee0.js";import{Q as E}from"./QItem.feae2cc6.js";import{I as J,_ as K}from"./UserArch.e0c9cd8d.js";import"./use-dark.1a58be91.js";import"./QImg.afc171b3.js";import"./QTooltip.4aa3b811.js";import"./position-engine.cb5f492d.js";import"./use-timeout.704cd155.js";import"./scroll.6f2429af.js";var R=B({name:"QIntersection",props:{tag:{type:String,default:"div"},once:Boolean,transition:String,transitionDuration:{type:[String,Number],default:300},ssrPrerender:Boolean,margin:String,threshold:[Number,Array],root:{default:null},disable:Boolean,onVisibility:Function},setup(e,{slots:l,emit:r}){const i=C(I.value===!0?e.ssrPrerender:!1),m=p(()=>e.root!==void 0||e.margin!==void 0||e.threshold!==void 0?{handler:v,cfg:{root:e.root,rootMargin:e.margin,threshold:e.threshold}}:v),c=p(()=>e.disable!==!0&&(I.value!==!0||e.once!==!0||e.ssrPrerender!==!0)),a=p(()=>[[J,m.value,void 0,{once:e.once}]]),o=p(()=>`--q-transition-duration: ${e.transitionDuration}ms`);function v(h){i.value!==h.isIntersecting&&(i.value=h.isIntersecting,e.onVisibility!==void 0&&r("visibility",i.value))}function w(){if(i.value===!0)return[y("div",{key:"content",style:o.value},V(l.default))];if(l.hidden!==void 0)return[y("div",{key:"hidden",style:o.value},l.hidden())]}return()=>{const h=e.transition?[y($,{name:"q-transition--"+e.transition},w)]:w();return P(e.tag,{class:"q-intersection"},h,"main",c.value,()=>a.value)}}});const W={class:"arch-wrapper bgea"},G=["src"],X={__name:"UserList",props:{userList:{type:Array,default:()=>[]}},emits:["follow"],setup(e){const l=e,r=N();return(i,m)=>{const c=T("router-link");return f(!0),b(Q,null,U(l.userList,a=>(f(),k(R,{key:a._id,transition:"flip-right",style:{height:"200px",width:"80%"},once:""},{default:s(()=>[u("div",W,[t(E,{class:"row"},{default:s(()=>[t(_,{class:"col-auto",avatar:""},{default:s(()=>[t(c,{to:`/profile/${a.username}/recent`},{default:s(()=>[u("img",{class:"round q-pa-lg",style:{width:"100%"},src:a.avatar},null,8,G)]),_:2},1032,["to"])]),_:2},1024),t(_,{class:"col-3"},{default:s(()=>[t(n,{style:{"font-weight":"800"},class:"title2 text-bold"},{default:s(()=>[d(g(a.username),1)]),_:2},1024),a.username!==x(r).username?(f(),k(n,{key:0,style:{"margin-top":"10px !important"}},{default:s(()=>{var o,v;return[t(D,{class:"text-black",label:((o=a.followers)==null?void 0:o.indexOf(x(r)._id))!==-1?"followed":"follow",color:((v=a.followers)==null?void 0:v.indexOf(x(r)._id))!==-1?"light-green-14":"white",onClick:w=>i.$emit("follow",a.username)},null,8,["label","color","onClick"])]}),_:2},1024)):F("",!0)]),_:2},1024),t(_,{class:"col text-center"},{default:s(()=>[t(n,{class:"text-bold"},{default:s(()=>[d(g(a.watched),1)]),_:2},1024),t(n,null,{default:s(()=>[d("films")]),_:1})]),_:2},1024),t(_,{class:"col text-center"},{default:s(()=>[t(n,{class:"text-bold"},{default:s(()=>[d(g(a.reviewed),1)]),_:2},1024),t(n,null,{default:s(()=>[d("reviews")]),_:1})]),_:2},1024),t(_,{class:"col text-center"},{default:s(()=>[t(n,{class:"text-bold"},{default:s(()=>{var o;return[d(g((o=a.followers)==null?void 0:o.length),1)]}),_:2},1024),t(n,null,{default:s(()=>[d("followers")]),_:1})]),_:2},1024),t(_,{class:"col text-center"},{default:s(()=>[t(n,{class:"text-bold"},{default:s(()=>{var o;return[d(g((o=a.following)==null?void 0:o.length),1)]}),_:2},1024),t(n,null,{default:s(()=>[d("following")]),_:1})]),_:2},1024)]),_:2},1024)])]),_:2},1024))),128)}}};var L=q(X,[["__scopeId","data-v-3f9147ac"]]);const Y=e=>(O("data-v-53dfec73"),e=e(),z(),e),Z={class:"row flex-center",style:{"overflow-x":"clip"}},ee={class:"col-12 col-md-8"},te=Y(()=>u("div",{class:"titles"},"Top Users",-1)),se={class:"row q-gutter-lg gt-sm"},ae={class:"q-pt-md flex justify-center w100 q-gutter-y-lg lt-md"},oe={class:"q-pt-md flex justify-center w100 q-gutter-y-lg"},le={__name:"TopUsers",setup(e){const l=S([]),r=S([]),i=async c=>{await A.post("users/follow",{username:c}),m()},m=async()=>{const{data:c}=await M.get("users/pop");l.splice(0,l.length,...c.top3),r.splice(0,r.length,...c.top20)};return j(()=>{m()}),(c,a)=>(f(),b("div",Z,[u("div",ee,[te,u("div",se,[(f(!0),b(Q,null,U(l,o=>(f(),k(K,H({key:o.username},o,{class:"col"}),null,16))),128))]),u("div",ae,[t(L,{userList:l,onFollow:i},null,8,["userList"])]),u("div",oe,[t(L,{userList:r,onFollow:i},null,8,["userList"])])])]))}};var ge=q(le,[["__scopeId","data-v-53dfec73"]]);export{ge as default};
