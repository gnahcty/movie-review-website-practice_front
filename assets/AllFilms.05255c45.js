import{Q as F,a as z}from"./QItemLabel.28cb7de0.js";import{Q as D}from"./QItem.7fd5a40a.js";import{b as M}from"./QList.6b0a790d.js";import{Q as Y,a as S}from"./QBtnDropdown.e63feebd.js";import{h as c,C as V,aQ as J,aR as X,r as N,c as m,ae as E,_ as ee,M as ae,g as K,aZ as R,O as T,m as le,u as oe,Z as j,w as te,o as ne,j as C,k as x,v as Q,d as r,t as u,af as re,am as $,F as I,al as L,A as P,s as se,x as U,ai as O,aK as ie,aL as ue}from"./index.41ebcf44.js";import{u as W,a as H}from"./use-dark.bb245855.js";import{o as ce,u as de,a as me,b as ve,c as fe,Q as be}from"./QCheckbox.5e9bd8c3.js";import{u as ge,c as ye}from"./use-form.a2dd561e.js";import{Q as ke,a as _e,_ as he}from"./FilmCard.a6844cd5.js";import{C as G}from"./ClosePopup.51e90440.js";import{u as Ce}from"./use-quasar.66b5834f.js";import"./use-timeout.d53a31c9.js";import"./scroll.a7a5ba3b.js";import"./QMenu.aa415c4d.js";import"./position-engine.06a14c74.js";import"./uid.42677368.js";import"./QTooltip.413bc218.js";import"./QImg.8353c75d.js";import"./QCard.0e8d47b1.js";import"./QInput.7eda67a5.js";import"./use-key-composition.befea7ca.js";import"./QCardSection.2f9e2c7c.js";import"./checkLogin.3872f0d9.js";const xe=c("svg",{key:"svg",class:"q-radio__bg absolute non-selectable",viewBox:"0 0 24 24"},[c("path",{d:"M12,22a10,10 0 0 1 -10,-10a10,10 0 0 1 10,-10a10,10 0 0 1 10,10a10,10 0 0 1 -10,10m0,-22a12,12 0 0 0 -12,12a12,12 0 0 0 12,12a12,12 0 0 0 12,-12a12,12 0 0 0 -12,-12"}),c("path",{class:"q-radio__check",d:"M12,6a6,6 0 0 0 -6,6a6,6 0 0 0 6,6a6,6 0 0 0 6,-6a6,6 0 0 0 -6,-6"})]);var qe=V({name:"QRadio",props:{...W,...J,...ge,modelValue:{required:!0},val:{required:!0},label:String,leftLabel:Boolean,checkedIcon:String,uncheckedIcon:String,color:String,keepColor:Boolean,dense:Boolean,disable:Boolean,tabindex:[String,Number]},emits:["update:modelValue"],setup(e,{slots:v,emit:s}){const{proxy:y}=K(),i=H(e,y.$q),b=X(e,ce),n=N(null),{refocusTargetEl:_,refocusTarget:g}=de(e,n),f=m(()=>R(e.modelValue)===R(e.val)),a=m(()=>"q-radio cursor-pointer no-outline row inline no-wrap items-center"+(e.disable===!0?" disabled":"")+(i.value===!0?" q-radio--dark":"")+(e.dense===!0?" q-radio--dense":"")+(e.leftLabel===!0?" reverse":"")),h=m(()=>{const l=e.color!==void 0&&(e.keepColor===!0||f.value===!0)?` text-${e.color}`:"";return`q-radio__inner relative-position q-radio__inner--${f.value===!0?"truthy":"falsy"}${l}`}),k=m(()=>(f.value===!0?e.checkedIcon:e.uncheckedIcon)||null),p=m(()=>e.disable===!0?-1:e.tabindex||0),o=m(()=>{const l={type:"radio"};return e.name!==void 0&&Object.assign(l,{".checked":f.value===!0,"^checked":f.value===!0?"checked":void 0,name:e.name,value:e.val}),l}),d=ye(o);function t(l){l!==void 0&&(T(l),g(l)),e.disable!==!0&&f.value!==!0&&s("update:modelValue",e.val,l)}function q(l){(l.keyCode===13||l.keyCode===32)&&T(l)}function B(l){(l.keyCode===13||l.keyCode===32)&&t(l)}return Object.assign(y,{set:t}),()=>{const l=k.value!==null?[c("div",{key:"icon",class:"q-radio__icon-container absolute-full flex flex-center no-wrap"},[c(E,{class:"q-radio__icon",name:k.value})])]:[xe];e.disable!==!0&&d(l,"unshift"," q-radio__native q-ma-none q-pa-none");const w=[c("div",{class:h.value,style:b.value,"aria-hidden":"true"},l)];_.value!==null&&w.push(_.value);const A=e.label!==void 0?ee(v.default,[e.label]):ae(v.default);return A!==void 0&&w.push(c("div",{class:"q-radio__label q-anchor--skip"},A)),c("div",{ref:n,class:a.value,tabindex:p.value,role:"radio","aria-label":e.label,"aria-checked":f.value===!0?"true":"false","aria-disabled":e.disable===!0?"true":void 0,onClick:t,onKeydown:q,onKeyup:B},w)}}}),pe=V({name:"QToggle",props:{...me,icon:String,iconColor:String},emits:ve,setup(e){function v(s,y){const i=m(()=>(s.value===!0?e.checkedIcon:y.value===!0?e.indeterminateIcon:e.uncheckedIcon)||e.icon),b=m(()=>s.value===!0?e.iconColor:null);return()=>[c("div",{class:"q-toggle__track"}),c("div",{class:"q-toggle__thumb absolute flex flex-center no-wrap"},i.value!==void 0?[c(E,{name:i.value,color:b.value})]:void 0)]}return fe("toggle",v)}});const Z={radio:qe,checkbox:be,toggle:pe},we=Object.keys(Z);var Se=V({name:"QOptionGroup",props:{...W,modelValue:{required:!0},options:{type:Array,validator:e=>e.every(v=>"value"in v&&"label"in v)},name:String,type:{default:"radio",validator:e=>we.includes(e)},color:String,keepColor:Boolean,dense:Boolean,size:String,leftLabel:Boolean,inline:Boolean,disable:Boolean},emits:["update:modelValue"],setup(e,{emit:v,slots:s}){const{proxy:{$q:y}}=K(),i=Array.isArray(e.modelValue);e.type==="radio"?i===!0&&console.error("q-option-group: model should not be array"):i===!1&&console.error("q-option-group: model should be array in your case");const b=H(e,y),n=m(()=>Z[e.type]),_=m(()=>"q-option-group q-gutter-x-sm"+(e.inline===!0?" q-option-group--inline":"")),g=m(()=>{const a={role:"group"};return e.type==="radio"&&(a.role="radiogroup",e.disable===!0&&(a["aria-disabled"]="true")),a});function f(a){v("update:modelValue",a)}return()=>c("div",{class:_.value,...g.value},e.options.map((a,h)=>{const k=s["label-"+h]!==void 0?()=>s["label-"+h](a):s.label!==void 0?()=>s.label(a):void 0;return c("div",[c(n.value,{modelValue:e.modelValue,val:a.value,name:a.name===void 0?e.name:a.name,disable:e.disable||a.disable,label:k===void 0?a.label:null,leftLabel:a.leftLabel===void 0?e.leftLabel:a.leftLabel,color:a.color===void 0?e.color:a.color,checkedIcon:a.checkedIcon,uncheckedIcon:a.uncheckedIcon,dark:a.dark||b.value,size:a.size===void 0?e.size:a.size,dense:e.dense,keepColor:a.keepColor===void 0?e.keepColor:a.keepColor,"onUpdate:modelValue":f},k)])}))}});const Qe={class:"row justify-center"},Ie={class:"col-12 col-sm-8"},Le={class:"row"},Ve={class:"row justify-center q-my-md"},ea={__name:"AllFilms",setup(e){const v=Ce,s=le(),y=oe(),i=j([]),b=N([]),n=j({page:1,region:"TW",year:2023,rating:"",genres:""}),_=(o,d)=>{setTimeout(()=>{n.page++,g(),d(),console.log(n.page)},1e3)},g=async()=>{try{const{data:o}=await re.get("/films/allFilms",{params:n}),d=o.results.results;if(s.isLogin){const t=await $.post("/reviews/user",[...d]);i.push(...t.data.films)}else i.push(...d)}catch(o){console.log(o)}},f=async()=>{if(s.isLogin)try{const{data:o}=await $.get("lists/user");s.userLists&&(s.userLists=o.UserLists)}catch{v.notify({type:"warnings",message:"Something went wrong"})}},a=m(()=>{const o=[];for(let d=2023;d>1990;d--)o.push(d);return o}),h=[{value:28,label:"Action"},{value:12,label:"Adventure"},{value:16,label:"Animation"},{value:35,label:"Comedy"},{value:80,label:"Crime"},{value:99,label:"Documentary"},{value:18,label:"Drama"},{value:10751,label:"Family"},{value:14,label:"Fantasy"},{value:36,label:"History"},{value:27,label:"Horror"},{value:10402,label:"Music"},{value:9648,label:"Mystery"},{value:10749,label:"Romance"},{value:878,label:"Science Fiction"},{value:10770,label:"TV Movie"},{value:53,label:"Thriller"},{value:10752,label:"War"},{value:37,label:"Western"}],k=o=>{n.page=1,n.year=o,i.length=0,g()},p=o=>{n.page=1,n.rating=o,i.length=0,g()};return te(b,()=>{n.genres=b.value.join(),n.page=1,i.length=0,g()}),ne(async()=>{await g(),await f(),y.isLoading=!1}),(o,d)=>(C(),x("div",Qe,[Q("div",Ie,[r(Y,{spread:"",flat:"",class:"q-ma-md"},{default:u(()=>[r(S,{flat:"",label:n.year},{default:u(()=>[r(M,null,{default:u(()=>[(C(!0),x(I,null,L(a.value,(t,q)=>P((C(),se(D,{clickable:"",key:q,onClick:B=>k(t)},{default:u(()=>[r(F,null,{default:u(()=>[r(z,null,{default:u(()=>[U(O(t),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"])),[[G]])),128))]),_:1})]),_:1},8,["label"]),r(S,{flat:"",label:n.rating||"ratings"},{default:u(()=>[r(M,null,{default:u(()=>[(C(),x(I,null,L(5,t=>P(r(D,{clickable:"",key:t,onClick:q=>p(t)},{default:u(()=>[r(F,null,{default:u(()=>[r(z,null,{default:u(()=>[U(O(t),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"]),[[G]])),64))]),_:1})]),_:1},8,["label"]),r(S,{flat:"",label:"genres"},{default:u(()=>[r(Se,{modelValue:b.value,"onUpdate:modelValue":d[0]||(d[0]=t=>b.value=t),options:h,type:"checkbox"},null,8,["modelValue"])]),_:1})]),_:1}),r(ke,{onLoad:_,offset:250},{loading:u(()=>[Q("div",Ve,[r(_e,{color:"primary",size:"40px"})])]),default:u(()=>[Q("div",Le,[(C(!0),x(I,null,L(i,t=>(C(),x("div",{class:"col-6 col-sm-6 col-md-4 col-lg-3 flex flex-center",key:t.id,style:{"align-content":"flex-start"}},[r(he,ie(ue(t)),null,16)]))),128))])]),_:1})])]))}};export{ea as default};
