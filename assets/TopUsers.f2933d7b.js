import{Y as $,aA as D,z as P,r as V,V as x,c as p,h as w,I as N,a6 as T,J as j,aH as L,u as A,p as F,j as _,k as I,aj as B,q as k,s as r,t as v,d as n,v as u,ag as g,x as y,Q as M,ah as O,F as C,W as q,o as E,ak as H,ad as z,aK as J,aL as K,aM as R}from"./index.db1df928.js";import{Q as f,a as d}from"./QItemLabel.2b622e28.js";import{Q as W}from"./QItem.0ad2f4d4.js";import{_ as Y}from"./UserArch.9bca612f.js";import"./use-dark.9a7c073f.js";import"./QImg.744f39c6.js";import"./QTooltip.e4773cee.js";import"./position-engine.703e7815.js";import"./use-timeout.74cdd684.js";import"./scroll.b59033f4.js";const S={threshold:0,root:null,rootMargin:"0px"};function U(e,t,o){let a,c,l;typeof o=="function"?(a=o,c=S,l=t.cfg===void 0):(a=o.handler,c=Object.assign({},S,o.cfg),l=t.cfg===void 0||D(t.cfg,c)===!1),t.handler!==a&&(t.handler=a),l===!0&&(t.cfg=c,t.observer!==void 0&&t.observer.unobserve(e),t.observer=new IntersectionObserver(([s])=>{if(typeof t.handler=="function"){if(s.rootBounds===null&&document.body.contains(e)===!0){t.observer.unobserve(e),t.observer.observe(e);return}(t.handler(s,t.observer)===!1||t.once===!0&&s.isIntersecting===!0)&&Q(e)}},c),t.observer.observe(e))}function Q(e){const t=e.__qvisible;t!==void 0&&(t.observer!==void 0&&t.observer.unobserve(e),delete e.__qvisible)}var G=$({name:"intersection",mounted(e,{modifiers:t,value:o}){const a={once:t.once===!0};U(e,a,o),e.__qvisible=a},updated(e,t){const o=e.__qvisible;o!==void 0&&U(e,o,t.value)},beforeUnmount:Q}),X=P({name:"QIntersection",props:{tag:{type:String,default:"div"},once:Boolean,transition:String,transitionDuration:{type:[String,Number],default:300},ssrPrerender:Boolean,margin:String,threshold:[Number,Array],root:{default:null},disable:Boolean,onVisibility:Function},setup(e,{slots:t,emit:o}){const a=V(x.value===!0?e.ssrPrerender:!1),c=p(()=>e.root!==void 0||e.margin!==void 0||e.threshold!==void 0?{handler:m,cfg:{root:e.root,rootMargin:e.margin,threshold:e.threshold}}:m),l=p(()=>e.disable!==!0&&(x.value!==!0||e.once!==!0||e.ssrPrerender!==!0)),s=p(()=>[[G,c.value,void 0,{once:e.once}]]),i=p(()=>`--q-transition-duration: ${e.transitionDuration}ms`);function m(h){a.value!==h.isIntersecting&&(a.value=h.isIntersecting,e.onVisibility!==void 0&&o("visibility",a.value))}function b(){if(a.value===!0)return[w("div",{key:"content",style:i.value},j(t.default))];if(t.hidden!==void 0)return[w("div",{key:"hidden",style:i.value},t.hidden())]}return()=>{const h=e.transition?[w(N,{name:"q-transition--"+e.transition},b)]:b();return T(e.tag,{class:"q-intersection"},h,"main",l.value,()=>s.value)}}});const Z={class:"arch-wrapper bgea"},ee=["src"],te={__name:"UserList",props:{userList:{type:Array,default:()=>[]}},emits:["follow"],setup(e){const t=e,o=A();return(a,c)=>{const l=F("router-link");return _(!0),I(C,null,B(t.userList,s=>(_(),k(X,{key:s._id,transition:"flip-right",style:{height:"200px",width:"80%"},once:""},{default:r(()=>[v("div",Z,[n(W,{class:"row"},{default:r(()=>[n(f,{class:"col-auto",avatar:""},{default:r(()=>[n(l,{to:`/profile/${s.username}/recent`},{default:r(()=>[v("img",{class:"round q-pa-lg",style:{width:"100%"},src:s.avatar},null,8,ee)]),_:2},1032,["to"])]),_:2},1024),n(f,{class:"col-3"},{default:r(()=>[n(d,{style:{"font-weight":"800"},class:"title2 text-bold"},{default:r(()=>[u(g(s.username),1)]),_:2},1024),s.username!==y(o).username?(_(),k(d,{key:0,style:{"margin-top":"10px !important"}},{default:r(()=>{var i,m;return[n(M,{class:"text-black",label:((i=s.followers)==null?void 0:i.indexOf(y(o)._id))!==-1?"followed":"follow",color:((m=s.followers)==null?void 0:m.indexOf(y(o)._id))!==-1?"light-green-14":"white",onClick:b=>a.$emit("follow",s.username)},null,8,["label","color","onClick"])]}),_:2},1024)):O("",!0)]),_:2},1024),n(f,{class:"col text-center"},{default:r(()=>[n(d,{class:"text-bold"},{default:r(()=>[u(g(s.watched),1)]),_:2},1024),n(d,null,{default:r(()=>[u("films")]),_:1})]),_:2},1024),n(f,{class:"col text-center"},{default:r(()=>[n(d,{class:"text-bold"},{default:r(()=>[u(g(s.reviewed),1)]),_:2},1024),n(d,null,{default:r(()=>[u("reviews")]),_:1})]),_:2},1024),n(f,{class:"col text-center"},{default:r(()=>[n(d,{class:"text-bold"},{default:r(()=>{var i;return[u(g((i=s.followers)==null?void 0:i.length),1)]}),_:2},1024),n(d,null,{default:r(()=>[u("followers")]),_:1})]),_:2},1024),n(f,{class:"col text-center"},{default:r(()=>[n(d,{class:"text-bold"},{default:r(()=>{var i;return[u(g((i=s.following)==null?void 0:i.length),1)]}),_:2},1024),n(d,null,{default:r(()=>[u("following")]),_:1})]),_:2},1024)]),_:2},1024)])]),_:2},1024))),128)}}};var oe=L(te,[["__scopeId","data-v-3f9147ac"]]);const se=e=>(K("data-v-f86e487a"),e=e(),R(),e),re={class:"row flex-center",style:{"overflow-x":"clip"}},ne={class:"col-12 col-md-8"},ae=se(()=>v("div",{class:"titles"},"Top Users",-1)),ie={class:"row q-gutter-lg"},le={class:"q-pt-md flex justify-center w100 q-gutter-y-lg"},ce={__name:"TopUsers",setup(e){const t=q([]),o=q([]),a=async l=>{await H.post("users/follow",{username:l}),c()},c=async()=>{const{data:l}=await z.get("users/pop");t.splice(0,t.length,...l.top3),o.splice(0,o.length,...l.top20)};return E(()=>{c()}),(l,s)=>(_(),I("div",re,[v("div",ne,[ae,v("div",ie,[(_(!0),I(C,null,B(t,i=>(_(),k(Y,J({key:i.username},i,{class:"col"}),null,16))),128))]),v("div",le,[n(oe,{userList:o,onFollow:a},null,8,["userList"])])])]))}};var we=L(ce,[["__scopeId","data-v-f86e487a"]]);export{we as default};
