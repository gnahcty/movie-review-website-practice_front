import{C as Q,r as B,Y as I,c as p,h as y,L as $,a8 as N,M as P,aJ as q,m as T,q as V,j as m,k as b,al as U,s as k,t as a,v as u,d as s,x as i,ai as g,y as x,Q as D,aj as F,F as C,u as j,Z as S,o as M,am as A,af as O,aM as E,aN as G,aO as H}from"./index.41ebcf44.js";import{Q as f,a as r}from"./QItemLabel.28cb7de0.js";import{Q as J}from"./QItem.7fd5a40a.js";import{I as R,_ as Y}from"./UserArch.320338cc.js";import"./use-dark.bb245855.js";import"./QImg.8353c75d.js";import"./QTooltip.413bc218.js";import"./position-engine.06a14c74.js";import"./use-timeout.d53a31c9.js";import"./scroll.a7a5ba3b.js";var Z=Q({name:"QIntersection",props:{tag:{type:String,default:"div"},once:Boolean,transition:String,transitionDuration:{type:[String,Number],default:300},ssrPrerender:Boolean,margin:String,threshold:[Number,Array],root:{default:null},disable:Boolean,onVisibility:Function},setup(e,{slots:d,emit:l}){const n=B(I.value===!0?e.ssrPrerender:!1),v=p(()=>e.root!==void 0||e.margin!==void 0||e.threshold!==void 0?{handler:c,cfg:{root:e.root,rootMargin:e.margin,threshold:e.threshold}}:c),_=p(()=>e.disable!==!0&&(I.value!==!0||e.once!==!0||e.ssrPrerender!==!0)),t=p(()=>[[R,v.value,void 0,{once:e.once}]]),o=p(()=>`--q-transition-duration: ${e.transitionDuration}ms`);function c(h){n.value!==h.isIntersecting&&(n.value=h.isIntersecting,e.onVisibility!==void 0&&l("visibility",n.value))}function w(){if(n.value===!0)return[y("div",{key:"content",style:o.value},P(d.default))];if(d.hidden!==void 0)return[y("div",{key:"hidden",style:o.value},d.hidden())]}return()=>{const h=e.transition?[y($,{name:"q-transition--"+e.transition},w)]:w();return N(e.tag,{class:"q-intersection"},h,"main",_.value,()=>t.value)}}});const z={class:"arch-wrapper bgea"},K=["src"],W={__name:"UserList",props:{userList:{type:Array,default:()=>[]}},emits:["follow"],setup(e){const d=e,l=T();return(n,v)=>{const _=V("router-link");return m(!0),b(C,null,U(d.userList,t=>(m(),k(Z,{key:t._id,transition:"flip-right",style:{height:"200px",width:"80%"},once:""},{default:a(()=>[u("div",z,[s(J,{class:"row"},{default:a(()=>[s(f,{class:"col-auto",avatar:""},{default:a(()=>[s(_,{to:`/profile/${t.username}/recent`},{default:a(()=>[u("img",{class:"round q-pa-lg",style:{width:"100%"},src:t.avatar},null,8,K)]),_:2},1032,["to"])]),_:2},1024),s(f,{class:"col-3"},{default:a(()=>[s(r,{style:{"font-weight":"800"},class:"title2 text-bold"},{default:a(()=>[i(g(t.username),1)]),_:2},1024),t.username!==x(l).username?(m(),k(r,{key:0,style:{"margin-top":"10px !important"}},{default:a(()=>{var o,c;return[s(D,{class:"text-black",label:((o=t.followers)==null?void 0:o.indexOf(x(l)._id))!==-1?"followed":"follow",color:((c=t.followers)==null?void 0:c.indexOf(x(l)._id))!==-1?"light-green-14":"white",onClick:w=>n.$emit("follow",t.username)},null,8,["label","color","onClick"])]}),_:2},1024)):F("",!0)]),_:2},1024),s(f,{class:"col text-center"},{default:a(()=>[s(r,{class:"text-bold"},{default:a(()=>[i(g(t.watched),1)]),_:2},1024),s(r,null,{default:a(()=>[i("films")]),_:1})]),_:2},1024),s(f,{class:"col text-center"},{default:a(()=>[s(r,{class:"text-bold"},{default:a(()=>[i(g(t.reviewed),1)]),_:2},1024),s(r,null,{default:a(()=>[i("reviews")]),_:1})]),_:2},1024),s(f,{class:"col text-center"},{default:a(()=>[s(r,{class:"text-bold"},{default:a(()=>{var o;return[i(g((o=t.followers)==null?void 0:o.length),1)]}),_:2},1024),s(r,null,{default:a(()=>[i("followers")]),_:1})]),_:2},1024),s(f,{class:"col text-center"},{default:a(()=>[s(r,{class:"text-bold"},{default:a(()=>{var o;return[i(g((o=t.following)==null?void 0:o.length),1)]}),_:2},1024),s(r,null,{default:a(()=>[i("following")]),_:1})]),_:2},1024)]),_:2},1024)])]),_:2},1024))),128)}}};var L=q(W,[["__scopeId","data-v-3f9147ac"]]);const X=e=>(G("data-v-3ba13d5a"),e=e(),H(),e),ee={class:"row flex-center",style:{"overflow-x":"clip"}},te={class:"col-12 col-md-8"},se=X(()=>u("div",{class:"titles"},"Top Users",-1)),ae={class:"row q-gutter-lg gt-sm"},oe={class:"q-pt-md flex justify-center w100 q-gutter-y-lg lt-md"},le={class:"q-pt-md flex justify-center w100 q-gutter-y-lg"},ne={__name:"TopUsers",setup(e){const d=j(),l=S([]),n=S([]),v=async t=>{await A.post("users/follow",{username:t}),_()},_=async()=>{const{data:t}=await O.get("users/pop");l.splice(0,l.length,...t.top3),n.splice(0,n.length,...t.top20)};return M(async()=>{await _(),d.isLoading=!1}),(t,o)=>(m(),b("div",ee,[u("div",te,[se,u("div",ae,[(m(!0),b(C,null,U(l,c=>(m(),k(Y,E({key:c.username},c,{class:"col"}),null,16))),128))]),u("div",oe,[s(L,{userList:l,onFollow:v},null,8,["userList"])]),u("div",le,[s(L,{userList:n,onFollow:v},null,8,["userList"])])])]))}};var he=q(ne,[["__scopeId","data-v-3ba13d5a"]]);export{he as default};
