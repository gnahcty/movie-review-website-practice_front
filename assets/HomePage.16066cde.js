import{Q as w}from"./QTooltip.32fc7aa6.js";import{Q as j}from"./QImg.b8f1cac9.js";import{z as de,c as I,h as C,J as ge,w as ee,o as me,C as ve,a6 as he,aG as ye,Q as z,X as be,g as xe,aH as fe,u as ke,r as te,p as G,j as _,k as P,d as a,s as o,F as T,aj as Q,q as V,v as E,ag as q,t as l,af as ae,ac as oe,ah as le,x as U,W as B,a as qe,ad as D,aI as Se,aJ as Ce,aK as Ie,ak as Pe,aL as $e,aM as Ee}from"./index.3bc22c38.js";import{g as A,n as Te,S as Ve,a as Le,N as Qe}from"./grid.329b6895.js";import{Q as L}from"./QCardSection.8fe112af.js";import{Q as se,a as $}from"./QItemLabel.4b74e895.js";import{Q as ne}from"./QRating.7c77fd7a.js";import{Q as ie}from"./QItem.d1c706a8.js";import{Q as re}from"./QCard.8ac245fb.js";import{u as Me,a as Oe,b as ze,c as Be}from"./use-panel.6e068509.js";import{u as Ge,a as Ue}from"./use-dark.b95cbb6d.js";import{u as Fe,a as Ne,b as Re}from"./use-fullscreen.1c659acf.js";import{_ as De}from"./UserArch.1ca17b86.js";import"./position-engine.c6cd8ece.js";import"./use-timeout.6afebf57.js";import"./scroll.2f796c9f.js";import"./use-form.6c9f8a58.js";import"./format.a33550d6.js";function Ae({swiper:e,extendParams:g,on:c,emit:i}){let s;e.autoplay={running:!1,paused:!1},g({autoplay:{enabled:!1,delay:3e3,waitForTransition:!0,disableOnInteraction:!0,stopOnLastSlide:!1,reverseDirection:!1,pauseOnMouseEnter:!1}});function r(){if(!e.size){e.autoplay.running=!1,e.autoplay.paused=!1;return}const u=e.slides.eq(e.activeIndex);let d=e.params.autoplay.delay;u.attr("data-swiper-autoplay")&&(d=u.attr("data-swiper-autoplay")||e.params.autoplay.delay),clearTimeout(s),s=Te(()=>{let v;e.params.autoplay.reverseDirection?e.params.loop?(e.loopFix(),v=e.slidePrev(e.params.speed,!0,!0),i("autoplay")):e.isBeginning?e.params.autoplay.stopOnLastSlide?m():(v=e.slideTo(e.slides.length-1,e.params.speed,!0,!0),i("autoplay")):(v=e.slidePrev(e.params.speed,!0,!0),i("autoplay")):e.params.loop?(e.loopFix(),v=e.slideNext(e.params.speed,!0,!0),i("autoplay")):e.isEnd?e.params.autoplay.stopOnLastSlide?m():(v=e.slideTo(0,e.params.speed,!0,!0),i("autoplay")):(v=e.slideNext(e.params.speed,!0,!0),i("autoplay")),(e.params.cssMode&&e.autoplay.running||v===!1)&&r()},d)}function x(){return typeof s!="undefined"||e.autoplay.running?!1:(e.autoplay.running=!0,i("autoplayStart"),r(),!0)}function m(){return!e.autoplay.running||typeof s=="undefined"?!1:(s&&(clearTimeout(s),s=void 0),e.autoplay.running=!1,i("autoplayStop"),!0)}function S(u){!e.autoplay.running||e.autoplay.paused||(s&&clearTimeout(s),e.autoplay.paused=!0,u===0||!e.params.autoplay.waitForTransition?(e.autoplay.paused=!1,r()):["transitionend","webkitTransitionEnd"].forEach(d=>{e.$wrapperEl[0].addEventListener(d,y)}))}function p(){const u=A();u.visibilityState==="hidden"&&e.autoplay.running&&S(),u.visibilityState==="visible"&&e.autoplay.paused&&(r(),e.autoplay.paused=!1)}function y(u){!e||e.destroyed||!e.$wrapperEl||u.target===e.$wrapperEl[0]&&(["transitionend","webkitTransitionEnd"].forEach(d=>{e.$wrapperEl[0].removeEventListener(d,y)}),e.autoplay.paused=!1,e.autoplay.running?r():m())}function t(){e.params.autoplay.disableOnInteraction?m():(i("autoplayPause"),S()),["transitionend","webkitTransitionEnd"].forEach(u=>{e.$wrapperEl[0].removeEventListener(u,y)})}function n(){e.params.autoplay.disableOnInteraction||(e.autoplay.paused=!1,i("autoplayResume"),r())}function b(){e.params.autoplay.pauseOnMouseEnter&&(e.$el.on("mouseenter",t),e.$el.on("mouseleave",n))}function f(){e.$el.off("mouseenter",t),e.$el.off("mouseleave",n)}c("init",()=>{e.params.autoplay.enabled&&(x(),A().addEventListener("visibilitychange",p),b())}),c("beforeTransitionStart",(u,d,v)=>{e.autoplay.running&&(v||!e.params.autoplay.disableOnInteraction?e.autoplay.pause(d):m())}),c("sliderFirstMove",()=>{e.autoplay.running&&(e.params.autoplay.disableOnInteraction?m():S())}),c("touchEnd",()=>{e.params.cssMode&&e.autoplay.paused&&!e.params.autoplay.disableOnInteraction&&r()}),c("destroy",()=>{f(),e.autoplay.running&&m(),A().removeEventListener("visibilitychange",p)}),Object.assign(e.autoplay,{pause:S,run:r,start:x,stop:m})}var ue=de({name:"QCarouselSlide",props:{...Me,imgSrc:String},setup(e,{slots:g}){const c=I(()=>e.imgSrc?{backgroundImage:`url("${e.imgSrc}")`}:{});return()=>C("div",{class:"q-carousel__slide",style:c.value},ge(g.default))}});const we=["top","right","bottom","left"],je=["regular","flat","outline","push","unelevated"];var ce=de({name:"QCarousel",props:{...Ge,...Oe,...Fe,transitionPrev:{type:String,default:"fade"},transitionNext:{type:String,default:"fade"},height:String,padding:Boolean,controlColor:String,controlTextColor:String,controlType:{type:String,validator:e=>je.includes(e),default:"flat"},autoplay:[Number,Boolean],arrows:Boolean,prevIcon:String,nextIcon:String,navigation:Boolean,navigationPosition:{type:String,validator:e=>we.includes(e)},navigationIcon:String,navigationActiveIcon:String,thumbnails:Boolean},emits:[...Ne,...ze],setup(e,{slots:g}){const{proxy:{$q:c}}=xe(),i=Ue(e,c);let s=null,r;const{updatePanelsList:x,getPanelContent:m,panelDirectives:S,goToPanel:p,previousPanel:y,nextPanel:t,getEnabledPanels:n,panelIndex:b}=Be(),{inFullscreen:f}=Re(),u=I(()=>f.value!==!0&&e.height!==void 0?{height:e.height}:{}),d=I(()=>e.vertical===!0?"vertical":"horizontal"),v=I(()=>`q-carousel q-panel-parent q-carousel--with${e.padding===!0?"":"out"}-padding`+(f.value===!0?" fullscreen":"")+(i.value===!0?" q-carousel--dark q-dark":"")+(e.arrows===!0?` q-carousel--arrows-${d.value}`:"")+(e.navigation===!0?` q-carousel--navigation-${K.value}`:"")),H=I(()=>{const h=[e.prevIcon||c.iconSet.carousel[e.vertical===!0?"up":"left"],e.nextIcon||c.iconSet.carousel[e.vertical===!0?"down":"right"]];return e.vertical===!1&&c.lang.rtl===!0?h.reverse():h}),J=I(()=>e.navigationIcon||c.iconSet.carousel.navigationIcon),pe=I(()=>e.navigationActiveIcon||J.value),K=I(()=>e.navigationPosition||(e.vertical===!0?"right":"bottom")),F=I(()=>({color:e.controlColor,textColor:e.controlTextColor,round:!0,[e.controlType]:!0,dense:!0}));ee(()=>e.modelValue,()=>{e.autoplay&&N()}),ee(()=>e.autoplay,h=>{h?N():s!==null&&(clearTimeout(s),s=null)});function N(){const h=ye(e.autoplay)===!0?Math.abs(e.autoplay):5e3;s!==null&&clearTimeout(s),s=setTimeout(()=>{s=null,h>=0?t():y()},h)}me(()=>{e.autoplay&&N()}),ve(()=>{s!==null&&clearTimeout(s)});function W(h,O){return C("div",{class:`q-carousel__control q-carousel__navigation no-wrap absolute flex q-carousel__navigation--${h} q-carousel__navigation--${K.value}`+(e.controlColor!==void 0?` text-${e.controlColor}`:"")},[C("div",{class:"q-carousel__navigation-inner flex flex-center no-wrap"},n().map(O))])}function _e(){const h=[];if(e.navigation===!0){const O=g["navigation-icon"]!==void 0?g["navigation-icon"]:k=>C(z,{key:"nav"+k.name,class:`q-carousel__navigation-icon q-carousel__navigation-icon--${k.active===!0?"":"in"}active`,...k.btnProps,onClick:k.onClick}),R=r-1;h.push(W("buttons",(k,X)=>{const Y=k.props.name,Z=b.value===X;return O({index:X,maxIndex:R,name:Y,active:Z,btnProps:{icon:Z===!0?pe.value:J.value,size:"sm",...F.value},onClick:()=>{p(Y)}})}))}else if(e.thumbnails===!0){const O=e.controlColor!==void 0?` text-${e.controlColor}`:"";h.push(W("thumbnails",R=>{const k=R.props;return C("img",{key:"tmb#"+k.name,class:`q-carousel__thumbnail q-carousel__thumbnail--${k.name===e.modelValue?"":"in"}active`+O,src:k.imgSrc||k["img-src"],onClick:()=>{p(k.name)}})}))}return e.arrows===!0&&b.value>=0&&((e.infinite===!0||b.value>0)&&h.push(C("div",{key:"prev",class:`q-carousel__control q-carousel__arrow q-carousel__prev-arrow q-carousel__prev-arrow--${d.value} absolute flex flex-center`},[C(z,{icon:H.value[0],...F.value,onClick:y})])),(e.infinite===!0||b.value<r-1)&&h.push(C("div",{key:"next",class:`q-carousel__control q-carousel__arrow q-carousel__next-arrow q-carousel__next-arrow--${d.value} absolute flex flex-center`},[C(z,{icon:H.value[1],...F.value,onClick:t})]))),be(g.control,h)}return()=>(r=x(g),C("div",{class:v.value,style:u.value},[he("div",{class:"q-carousel__slides-container"},m(),"sl-cont",e.swipeable,()=>S.value)].concat(_e())))}});const He={class:"text-h4 text-bold col text-no-wrap",style:{"text-overflow":"ellipsis",overflow:"hidden"}},Je={class:"text-h6 q-ml-md col-3"},Ke=["src"],We={class:"q-ml-xs q-mr-sm"},Xe={class:"q-mr-xs"},Ye={class:"text-h4 text-bold col text-no-wrap",style:{"text-overflow":"ellipsis",overflow:"hidden"}},Ze=["src"],et={class:"q-ml-xs q-mr-sm"},tt={class:"q-mr-xs"},at={__name:"ReviewCarousel",props:{reviewGroups:{type:Array},reviewGroups2:{type:Array}},emits:["like"],setup(e){const g=e,c=ke(),i=te(1),s=te(1);return(r,x)=>{const m=G("RouterLink"),S=G("router-link");return _(),P(T,null,[a(ce,{modelValue:i.value,"onUpdate:modelValue":x[0]||(x[0]=p=>i.value=p),"transition-prev":"slide-right","transition-next":"slide-left",swipeable:"",animated:"","control-color":"black",padding:"",arrows:"",infinite:"",style:{width:"80vw"},class:"self-center gt-sm h100"},{default:o(()=>[(_(!0),P(T,null,Q(g.reviewGroups,(p,y)=>(_(),V(ue,{name:y+1,key:y,class:"wrapper flex flex-center",style:{"padding-bottom":"0 !important"}},{default:o(()=>[(_(!0),P(T,null,Q(p,t=>(_(),V(re,{key:t._id,flat:"",class:"rounded15 border5 h100 bgea"},{default:o(()=>[a(L,{horizontal:"",class:"fit row items-center"},{default:o(()=>[a(m,{to:"/films/"+t.film,class:"col-3 flex items-center full-height"},{default:o(()=>[a(L,{class:"q-pr-none fit",style:{"box-sizing":"border-box"}},{default:o(()=>[a(j,{src:"https://image.tmdb.org/t/p/w300/"+t.poster,class:"rounded15 fit ratio border5"},{default:o(()=>[a(w,{anchor:"center middle",self:"top middle"},{default:o(()=>[E(q(t.title),1)]),_:2},1024)]),_:2},1032,["src"])]),_:2},1024)]),_:2},1032,["to"]),a(L,{class:"col-9 full-height q-py-sm"},{default:o(()=>[a(ie,{class:"fit q-pa-none"},{default:o(()=>[a(se,{class:"column flex justify-center"},{default:o(()=>[a($,{lines:"1",class:"col-3"},{default:o(()=>[a(m,{to:"/films/"+t.film,class:"row"},{default:o(()=>[l("span",He,q(t.title),1)]),_:2},1032,["to"]),l("span",Je,q(t.year),1)]),_:2},1024),a($,{lines:"1",class:"col-2"},{default:o(()=>[a(S,{to:`/profile/${t.user.username}/recent`},{default:o(()=>[a(ae,{size:"sm"},{default:o(()=>[l("img",{src:t.user.avatar},null,8,Ke)]),_:2},1024),l("span",We,q(t.user.username),1)]),_:2},1032,["to"]),a(ne,{modelValue:t.ratings,"onUpdate:modelValue":n=>t.ratings=n,max:t.ratings,size:"1em",icon:"star_border","icon-selected":"star","icon-half":"star_half",readonly:""},null,8,["modelValue","onUpdate:modelValue","max"]),t.like?(_(),V(oe,{key:0,name:"favorite",color:"red",class:"q-ml-sm"})):le("",!0)]),_:2},1024),a($,{caption:"",lines:"3",class:"col-3"},{default:o(()=>[E(q(t.comments),1)]),_:2},1024),a($,{lines:"1",class:"col-2 flex items-center"},{default:o(()=>[a(z,{flat:"",round:"",icon:"favorite",class:"q-mr-sm",size:"sm",color:t.cmtLikes.indexOf(U(c)._id)===-1?"black":"red",onClick:n=>r.$emit("like",t._id)},null,8,["color","onClick"]),l("span",Xe,q(t.cmtLikes.length),1),E("likes ")]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:2},1032,["name"]))),128))]),_:1},8,["modelValue"]),a(ce,{modelValue:s.value,"onUpdate:modelValue":x[1]||(x[1]=p=>s.value=p),"transition-prev":"slide-right","transition-next":"slide-left",swipeable:"",animated:"","control-color":"black",padding:"",arrows:"",infinite:"",style:{width:"100vw"},class:"self-center lt-md h100"},{default:o(()=>[(_(!0),P(T,null,Q(g.reviewGroups2,(p,y)=>(_(),V(ue,{name:y+1,key:y,class:"column",style:{"padding-bottom":"0 !important"}},{default:o(()=>[(_(!0),P(T,null,Q(p,t=>(_(),P("div",{key:t._id,class:"col w100"},[a(re,{flat:"",class:"rounded15 border5 h100 bgea"},{default:o(()=>[a(L,{horizontal:"",class:"h100 row flex-center q-gutter-sm"},{default:o(()=>[a(m,{to:"/films/"+t.film,class:"col flex items-center"},{default:o(()=>[a(L,{class:"q-pa-xs fit",style:{"box-sizing":"border-box"}},{default:o(()=>[a(j,{src:"https://image.tmdb.org/t/p/w300/"+t.poster,class:"rounded15 w100 ratio border5"},{default:o(()=>[a(w,{anchor:"center middle",self:"top middle"},{default:o(()=>[E(q(t.title),1)]),_:2},1024)]),_:2},1032,["src"])]),_:2},1024)]),_:2},1032,["to"]),a(L,{class:"col-9 full-height q-py-sm"},{default:o(()=>[a(ie,{class:"fit q-pa-none"},{default:o(()=>[a(se,{class:"column flex justify-center"},{default:o(()=>[a($,{lines:"1",class:"col-3"},{default:o(()=>[a(m,{to:"/films/"+t.film,class:"row"},{default:o(()=>[l("span",Ye,q(t.title),1)]),_:2},1032,["to"])]),_:2},1024),a($,{lines:"1",class:"col-2"},{default:o(()=>[a(S,{to:`/profile/${t.user.username}/recent`},{default:o(()=>[a(ae,{size:"sm"},{default:o(()=>[l("img",{src:t.user.avatar},null,8,Ze)]),_:2},1024),l("span",et,q(t.user.username),1)]),_:2},1032,["to"]),a(ne,{modelValue:t.ratings,"onUpdate:modelValue":n=>t.ratings=n,max:t.ratings,size:"1em",icon:"star_border","icon-selected":"star","icon-half":"star_half",readonly:""},null,8,["modelValue","onUpdate:modelValue","max"]),t.like?(_(),V(oe,{key:0,name:"favorite",color:"red",class:"q-ml-sm"})):le("",!0)]),_:2},1024),a($,{caption:"",lines:"3",class:"col-3"},{default:o(()=>[E(q(t.comments),1)]),_:2},1024),a($,{lines:"1",class:"col-2 flex items-center"},{default:o(()=>[a(z,{flat:"",round:"",icon:"favorite",class:"q-mr-sm",size:"sm",color:t.cmtLikes.indexOf(U(c)._id)===-1?"black":"red",onClick:n=>r.$emit("like",t._id)},null,8,["color","onClick"]),l("span",tt,q(t.cmtLikes.length),1),E("likes ")]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]))),128))]),_:2},1032,["name"]))),128))]),_:1},8,["modelValue"])],64)}}};var ot=fe(at,[["__scopeId","data-v-7d511f54"]]);const M=e=>($e("data-v-ff189464"),e=e(),Ee(),e),lt=M(()=>l("div",{class:"section",id:"frontPage"},[l("div",{class:"w100 h100 relative"},[l("img",{src:"https://cdn.discordapp.com/attachments/1109403221245571167/1142730115348959344/IMG_7940.png",style:{position:"absolute",top:"0",right:"0",width:"calc(18vw + 184.3px)"}}),l("img",{src:"https://cdn.discordapp.com/attachments/1109403221245571167/1142730114640130119/IMG_7939.png",style:{position:"absolute",bottom:"0",left:"0",width:"calc(19vw + 184.3px)"}}),l("img",{src:"https://cdn.discordapp.com/attachments/1109403221245571167/1142741333119873055/IMG_7943.png",style:{position:"absolute",top:"0",bottom:"0",left:"0",right:"0",margin:"auto",width:"calc(32vw + 208.9px)"}}),l("img",{src:"https://cdn.discordapp.com/attachments/1109403221245571167/1142741333480587387/IMG_7944.png",style:{position:"absolute",top:"0",bottom:"0",left:"0",right:"0",margin:"auto",width:"calc(32vw + 208.9px)"}}),l("img",{src:"https://cdn.discordapp.com/attachments/1109403221245571167/1142741333740630056/IMG_7945.png",style:{position:"absolute",top:"0",bottom:"0",left:"0",right:"0",margin:"auto",width:"calc(32vw + 208.9px)"}})])],-1)),st={class:"section"},nt={class:"column"},it=M(()=>l("p",{class:"titles"},"Popular This Week",-1)),rt={class:"row items-center",style:{width:"100%"}},ut=M(()=>l("div",{class:"col-1 relative"},[l("div",{class:"swiper-button-prev",id:"swiper-prev",style:{top:"auto !important"}})],-1)),ct={class:"col-10"},dt=M(()=>l("div",{class:"col-1 relative"},[l("div",{class:"swiper-button-next",id:"swiper-next",style:{top:"auto !important"}})],-1)),mt={class:"section"},ft={class:"column",style:{height:"90vh"}},pt=M(()=>l("div",{class:"titles col-auto",style:{"box-sizing":"border-box"}},"Popular Comments",-1)),_t={class:"col q-mb-md flex flex-center"},gt={class:"section"},vt={class:"column",style:{height:"90vh"}},ht=M(()=>l("div",{class:"titles col-2"},"Popular Users",-1)),yt={class:"row q-gutter-x-xl flex-center q-px-lg-xl col-10 w100"},bt={__name:"HomePage",emits:["fullpage-scroll"],setup(e,{emit:g}){const c={licenseKey:"gplv3-license",onLeave:(n,b,f,u)=>{g("fullpage-scroll",b.index)}},i=B([]),s=B([]),r=B([]),x=B([]),m={slidesPerView:1,spaceBetween:10,autoplay:{delay:1500,disableOnInteraction:!0},loop:!0,navigation:{prevEl:"#swiper-prev",nextEl:"#swiper-next"},modules:[Ae,Qe],breakpoints:{768:{slidesPerView:2,spaceBetween:20},1128:{slidesPerView:3,spaceBetween:20},1620:{slidesPerView:4,spaceBetween:20}}},S=async()=>{const{data:n}=await D.get("/films/trending");x.push(...n.results.results)},p=async()=>{const{data:n}=await D.get("reviews/pop"),b=n.results;i.length=0,s.length=0;for(let f=0;f<b.length;f+=6)i.push(b.slice(f,f+6));for(let f=0;f<b.length;f+=3)s.push(b.slice(f,f+3))},y=async()=>{const{data:n}=await D.get("users/pop");r.push(...n.top3)},t=async n=>{await Pe.post("reviews/like",{cmtID:n}),p()};return me(g("fullpage-scroll",0),S(),p(),y()),qe(()=>{g("fullpage-scroll",1)}),(n,b)=>{const f=G("RouterLink"),u=G("full-page");return _(),P("div",null,[a(u,{ref:"fullpage",options:c,id:"fullpage"},{default:o(()=>[lt,l("div",st,[l("div",nt,[it,l("div",rt,[ut,l("div",ct,[a(U(Ve),Se(Ce(m)),{default:o(()=>[(_(!0),P(T,null,Q(x,(d,v)=>(_(),V(U(Le),{key:v},{default:o(()=>[a(f,{to:"/films/"+d.id},{default:o(()=>[a(j,{src:"https://image.tmdb.org/t/p/w300/"+d.poster_path,class:"rounded15 border10 ratio",style:{width:"80%"}},{default:o(()=>[a(w,{anchor:"center middle",self:"top middle"},{default:o(()=>[E(q(d.title),1)]),_:2},1024)]),_:2},1032,["src"])]),_:2},1032,["to"])]),_:2},1024))),128))]),_:1},16)]),dt])])]),l("div",mt,[l("div",ft,[pt,l("div",_t,[a(ot,{reviewGroups:i,reviewGroups2:s,onLike:t},null,8,["reviewGroups","reviewGroups2"])])])]),l("div",gt,[l("div",vt,[ht,l("div",yt,[(_(!0),P(T,null,Q(r,(d,v)=>(_(),V(De,Ie({key:v},d,{class:"col-3"}),null,16))),128))])])])]),_:1},512)])}}};var Ut=fe(bt,[["__scopeId","data-v-ff189464"]]);export{Ut as default};
