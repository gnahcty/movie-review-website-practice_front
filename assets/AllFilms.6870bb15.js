import{Q as z,a as A}from"./QItemLabel.28092568.js";import{Q as R}from"./QItem.d5230b28.js";import{b as j}from"./QList.ca9433c6.js";import{Q as Z,a as S}from"./QBtnDropdown.46e41883.js";import{h as c,H as L,aQ as J,aR as X,r as O,c as m,ai as E,a2 as ee,R as ae,g as H,aZ as D,S as M,m as le,u as oe,a1 as T,w as te,o as ne,j as C,k as x,v as Q,d as r,t as u,aj as re,ap as $,F as I,ao as V,B as P,s as se,x as U,am as G,aM as ie,aN as ue}from"./index.9849f865.js";import{u as W,a as K}from"./use-dark.8f4e4c15.js";import{o as ce,u as de,a as me,b as ve,c as fe,Q as be}from"./QCheckbox.bc6f0581.js";import{u as ge,c as ye}from"./use-form.1e911870.js";import{Q as ke,a as _e,_ as he}from"./FilmCard.434bb987.js";import{C as N}from"./ClosePopup.89e164a5.js";import{u as Ce}from"./use-quasar.62c509a2.js";import"./use-timeout.107a2246.js";import"./scroll.9c88d611.js";import"./QMenu.949b3d23.js";import"./position-engine.6701e5b8.js";import"./uid.42677368.js";import"./QTooltip.04826552.js";import"./QImg.21ac5400.js";import"./QCard.4da98c71.js";import"./QInput.cc0242f8.js";import"./use-key-composition.49062a96.js";import"./QCardSection.c8156051.js";import"./checkLogin.0993e2a4.js";const xe=c("svg",{key:"svg",class:"q-radio__bg absolute non-selectable",viewBox:"0 0 24 24"},[c("path",{d:"M12,22a10,10 0 0 1 -10,-10a10,10 0 0 1 10,-10a10,10 0 0 1 10,10a10,10 0 0 1 -10,10m0,-22a12,12 0 0 0 -12,12a12,12 0 0 0 12,12a12,12 0 0 0 12,-12a12,12 0 0 0 -12,-12"}),c("path",{class:"q-radio__check",d:"M12,6a6,6 0 0 0 -6,6a6,6 0 0 0 6,6a6,6 0 0 0 6,-6a6,6 0 0 0 -6,-6"})]);var qe=L({name:"QRadio",props:{...W,...J,...ge,modelValue:{required:!0},val:{required:!0},label:String,leftLabel:Boolean,checkedIcon:String,uncheckedIcon:String,color:String,keepColor:Boolean,dense:Boolean,disable:Boolean,tabindex:[String,Number]},emits:["update:modelValue"],setup(e,{slots:v,emit:s}){const{proxy:y}=H(),i=K(e,y.$q),b=X(e,ce),n=O(null),{refocusTargetEl:_,refocusTarget:g}=de(e,n),f=m(()=>D(e.modelValue)===D(e.val)),a=m(()=>"q-radio cursor-pointer no-outline row inline no-wrap items-center"+(e.disable===!0?" disabled":"")+(i.value===!0?" q-radio--dark":"")+(e.dense===!0?" q-radio--dense":"")+(e.leftLabel===!0?" reverse":"")),h=m(()=>{const l=e.color!==void 0&&(e.keepColor===!0||f.value===!0)?` text-${e.color}`:"";return`q-radio__inner relative-position q-radio__inner--${f.value===!0?"truthy":"falsy"}${l}`}),k=m(()=>(f.value===!0?e.checkedIcon:e.uncheckedIcon)||null),p=m(()=>e.disable===!0?-1:e.tabindex||0),o=m(()=>{const l={type:"radio"};return e.name!==void 0&&Object.assign(l,{".checked":f.value===!0,"^checked":f.value===!0?"checked":void 0,name:e.name,value:e.val}),l}),d=ye(o);function t(l){l!==void 0&&(M(l),g(l)),e.disable!==!0&&f.value!==!0&&s("update:modelValue",e.val,l)}function q(l){(l.keyCode===13||l.keyCode===32)&&M(l)}function B(l){(l.keyCode===13||l.keyCode===32)&&t(l)}return Object.assign(y,{set:t}),()=>{const l=k.value!==null?[c("div",{key:"icon",class:"q-radio__icon-container absolute-full flex flex-center no-wrap"},[c(E,{class:"q-radio__icon",name:k.value})])]:[xe];e.disable!==!0&&d(l,"unshift"," q-radio__native q-ma-none q-pa-none");const w=[c("div",{class:h.value,style:b.value,"aria-hidden":"true"},l)];_.value!==null&&w.push(_.value);const F=e.label!==void 0?ee(v.default,[e.label]):ae(v.default);return F!==void 0&&w.push(c("div",{class:"q-radio__label q-anchor--skip"},F)),c("div",{ref:n,class:a.value,tabindex:p.value,role:"radio","aria-label":e.label,"aria-checked":f.value===!0?"true":"false","aria-disabled":e.disable===!0?"true":void 0,onClick:t,onKeydown:q,onKeyup:B},w)}}}),pe=L({name:"QToggle",props:{...me,icon:String,iconColor:String},emits:ve,setup(e){function v(s,y){const i=m(()=>(s.value===!0?e.checkedIcon:y.value===!0?e.indeterminateIcon:e.uncheckedIcon)||e.icon),b=m(()=>s.value===!0?e.iconColor:null);return()=>[c("div",{class:"q-toggle__track"}),c("div",{class:"q-toggle__thumb absolute flex flex-center no-wrap"},i.value!==void 0?[c(E,{name:i.value,color:b.value})]:void 0)]}return fe("toggle",v)}});const Y={radio:qe,checkbox:be,toggle:pe},we=Object.keys(Y);var Se=L({name:"QOptionGroup",props:{...W,modelValue:{required:!0},options:{type:Array,validator:e=>e.every(v=>"value"in v&&"label"in v)},name:String,type:{default:"radio",validator:e=>we.includes(e)},color:String,keepColor:Boolean,dense:Boolean,size:String,leftLabel:Boolean,inline:Boolean,disable:Boolean},emits:["update:modelValue"],setup(e,{emit:v,slots:s}){const{proxy:{$q:y}}=H(),i=Array.isArray(e.modelValue);e.type==="radio"?i===!0&&console.error("q-option-group: model should not be array"):i===!1&&console.error("q-option-group: model should be array in your case");const b=K(e,y),n=m(()=>Y[e.type]),_=m(()=>"q-option-group q-gutter-x-sm"+(e.inline===!0?" q-option-group--inline":"")),g=m(()=>{const a={role:"group"};return e.type==="radio"&&(a.role="radiogroup",e.disable===!0&&(a["aria-disabled"]="true")),a});function f(a){v("update:modelValue",a)}return()=>c("div",{class:_.value,...g.value},e.options.map((a,h)=>{const k=s["label-"+h]!==void 0?()=>s["label-"+h](a):s.label!==void 0?()=>s.label(a):void 0;return c("div",[c(n.value,{modelValue:e.modelValue,val:a.value,name:a.name===void 0?e.name:a.name,disable:e.disable||a.disable,label:k===void 0?a.label:null,leftLabel:a.leftLabel===void 0?e.leftLabel:a.leftLabel,color:a.color===void 0?e.color:a.color,checkedIcon:a.checkedIcon,uncheckedIcon:a.uncheckedIcon,dark:a.dark||b.value,size:a.size===void 0?e.size:a.size,dense:e.dense,keepColor:a.keepColor===void 0?e.keepColor:a.keepColor,"onUpdate:modelValue":f},k)])}))}});const Qe={class:"row justify-center"},Ie={class:"col-12 col-sm-8"},Ve={class:"row"},Le={class:"row justify-center q-my-md"},ea={__name:"AllFilms",setup(e){const v=Ce,s=le(),y=oe(),i=T([]),b=O([]),n=T({page:1,region:"TW",year:2023,rating:"",genres:""}),_=(o,d)=>{setTimeout(()=>{n.page++,g(),d(),console.log(n.page)},1e3)},g=async()=>{try{const{data:o}=await re.get("/films/allFilms",{params:n}),d=o.results.results;if(s.isLogin){const t=await $.post("/reviews/user",[...d]);i.push(...t.data.films)}else i.push(...d)}catch(o){console.log(o)}},f=async()=>{if(s.isLogin)try{const{data:o}=await $.get("lists/user");s.userLists&&(s.userLists=o.UserLists)}catch{v.notify({type:"warnings",message:"Something went wrong"})}},a=m(()=>{const o=[];for(let d=2023;d>1990;d--)o.push(d);return o}),h=[{value:28,label:"Action"},{value:12,label:"Adventure"},{value:16,label:"Animation"},{value:35,label:"Comedy"},{value:80,label:"Crime"},{value:99,label:"Documentary"},{value:18,label:"Drama"},{value:10751,label:"Family"},{value:14,label:"Fantasy"},{value:36,label:"History"},{value:27,label:"Horror"},{value:10402,label:"Music"},{value:9648,label:"Mystery"},{value:10749,label:"Romance"},{value:878,label:"Science Fiction"},{value:10770,label:"TV Movie"},{value:53,label:"Thriller"},{value:10752,label:"War"},{value:37,label:"Western"}],k=o=>{n.page=1,n.year=o,i.length=0,g()},p=o=>{n.page=1,n.rating=o,i.length=0,g()};return te(b,()=>{n.genres=b.value.join(),n.page=1,i.length=0,g()}),ne(async()=>{await g(),await f(),y.isLoading=!1}),(o,d)=>(C(),x("div",Qe,[Q("div",Ie,[r(Z,{spread:"",flat:"",class:"q-ma-md"},{default:u(()=>[r(S,{flat:"",label:n.year},{default:u(()=>[r(j,null,{default:u(()=>[(C(!0),x(I,null,V(a.value,(t,q)=>P((C(),se(R,{clickable:"",key:q,onClick:B=>k(t)},{default:u(()=>[r(z,null,{default:u(()=>[r(A,null,{default:u(()=>[U(G(t),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"])),[[N]])),128))]),_:1})]),_:1},8,["label"]),r(S,{flat:"",label:n.rating||"ratings"},{default:u(()=>[r(j,null,{default:u(()=>[(C(),x(I,null,V(5,t=>P(r(R,{clickable:"",key:t,onClick:q=>p(t)},{default:u(()=>[r(z,null,{default:u(()=>[r(A,null,{default:u(()=>[U(G(t),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"]),[[N]])),64))]),_:1})]),_:1},8,["label"]),r(S,{flat:"",label:"genres"},{default:u(()=>[r(Se,{modelValue:b.value,"onUpdate:modelValue":d[0]||(d[0]=t=>b.value=t),options:h,type:"checkbox"},null,8,["modelValue"])]),_:1})]),_:1}),r(ke,{onLoad:_,offset:250},{loading:u(()=>[Q("div",Le,[r(_e,{color:"primary",size:"40px"})])]),default:u(()=>[Q("div",Ve,[(C(!0),x(I,null,V(i,t=>(C(),x("div",{class:"col-6 col-sm-6 col-md-4 col-lg-3 flex flex-center",key:t.id,style:{"align-content":"flex-start"}},[r(he,ie(ue(t)),null,16)]))),128))])]),_:1})])]))}};export{ea as default};
