import{u as Q,a as W}from"./use-dark.9a7c073f.js";import{z as j,c as o,h as P,g as I,r as D,w as R,a1 as le,J as re,I as ce,C as de,ay as fe,K as ve}from"./index.db1df928.js";import{u as ge,v as A,a as me,b as he,c as ye,r as z,s as Se,p as K,d as xe}from"./position-engine.703e7815.js";import{u as ke,b as Ce,c as Pe,d as Te,e as qe,f as be,g as Be,h as Oe,a as Ee,j as $e}from"./use-timeout.74cdd684.js";import{g as Fe}from"./scroll.b59033f4.js";import{d as we,r as Me,e as H,f as De}from"./QList.2fb3899a.js";const Re={true:"inset",item:"item-inset","item-thumbnail":"item-thumbnail-inset"},C={xs:2,sm:4,md:8,lg:16,xl:24};var je=j({name:"QSeparator",props:{...Q,spaced:[Boolean,String],inset:[Boolean,String],vertical:Boolean,color:String,size:String},setup(e){const h=I(),l=W(e,h.proxy.$q),r=o(()=>e.vertical===!0?"vertical":"horizontal"),n=o(()=>` q-separator--${r.value}`),c=o(()=>e.inset!==!1?`${n.value}-${Re[e.inset]}`:""),s=o(()=>`q-separator${n.value}${c.value}`+(e.color!==void 0?` bg-${e.color}`:"")+(l.value===!0?" q-separator--dark":"")),f=o(()=>{const i={};if(e.size!==void 0&&(i[e.vertical===!0?"width":"height"]=e.size),e.spaced!==!1){const v=e.spaced===!0?`${C.md}px`:e.spaced in C?`${C[e.spaced]}px`:e.spaced,a=e.vertical===!0?["Left","Right"]:["Top","Bottom"];i[`margin${a[0]}`]=i[`margin${a[1]}`]=v}return i});return()=>P("hr",{class:s.value,style:f.value,"aria-orientation":r.value})}}),Ie=j({name:"QMenu",inheritAttrs:!1,props:{...ge,...ke,...Q,...Ce,persistent:Boolean,autoClose:Boolean,separateClosePopup:Boolean,noRouteDismiss:Boolean,noRefocus:Boolean,noFocus:Boolean,fit:Boolean,cover:Boolean,square:Boolean,anchor:{type:String,validator:A},self:{type:String,validator:A},offset:{type:Array,validator:me},scrollTarget:{default:void 0},touchPosition:Boolean,maxHeight:{type:String,default:null},maxWidth:{type:String,default:null}},emits:[...Pe,"click","escapeKey"],setup(e,{slots:h,emit:l,attrs:r}){let n=null,c,s,f;const i=I(),{proxy:v}=i,{$q:a}=v,u=D(null),d=D(!1),L=o(()=>e.persistent!==!0&&e.noRouteDismiss!==!0),_=W(e,a),{registerTick:J,removeTick:U}=Te(),{registerTimeout:T}=qe(),{transitionProps:G,transitionStyle:N}=be(e),{localScrollTarget:q,changeScrollEvent:V,unconfigureScrollTarget:X}=he(e,w),{anchorEl:g,canShow:Y}=ye({showing:d}),{hide:b}=Be({showing:d,canShow:Y,handleShow:oe,handleHide:ae,hideOnRouteChange:L,processOnMount:!0}),{showPortal:B,hidePortal:O,renderPortal:Z}=Oe(i,u,se,"menu"),y={anchorEl:g,innerRef:u,onClickOutside(t){if(e.persistent!==!0&&d.value===!0)return b(t),(t.type==="touchstart"||t.target.classList.contains("q-dialog__backdrop"))&&ve(t),!0}},E=o(()=>K(e.anchor||(e.cover===!0?"center middle":"bottom start"),a.lang.rtl)),p=o(()=>e.cover===!0?E.value:K(e.self||"top start",a.lang.rtl)),ee=o(()=>(e.square===!0?" q-menu--square":"")+(_.value===!0?" q-menu--dark q-dark":"")),te=o(()=>e.autoClose===!0?{onClick:ne}:{}),$=o(()=>d.value===!0&&e.persistent!==!0);R($,t=>{t===!0?(De(x),xe(y)):(H(x),z(y))});function S(){Ee(()=>{let t=u.value;t&&t.contains(document.activeElement)!==!0&&(t=t.querySelector("[autofocus][tabindex], [data-autofocus][tabindex]")||t.querySelector("[autofocus] [tabindex], [data-autofocus] [tabindex]")||t.querySelector("[autofocus], [data-autofocus]")||t,t.focus({preventScroll:!0}))})}function oe(t){if(n=e.noRefocus===!1?document.activeElement:null,we(M),B(),w(),c=void 0,t!==void 0&&(e.touchPosition||e.contextMenu)){const k=le(t);if(k.left!==void 0){const{top:ie,left:ue}=g.value.getBoundingClientRect();c={left:k.left-ue,top:k.top-ie}}}s===void 0&&(s=R(()=>a.screen.width+"|"+a.screen.height+"|"+e.self+"|"+e.anchor+"|"+a.lang.rtl,m)),e.noFocus!==!0&&document.activeElement.blur(),J(()=>{m(),e.noFocus!==!0&&S()}),T(()=>{a.platform.is.ios===!0&&(f=e.autoClose,u.value.click()),m(),B(!0),l("show",t)},e.transitionDuration)}function ae(t){U(),O(),F(!0),n!==null&&(t===void 0||t.qClickOutside!==!0)&&(((t&&t.type.indexOf("key")===0?n.closest('[tabindex]:not([tabindex^="-"])'):void 0)||n).focus(),n=null),T(()=>{O(!0),l("hide",t)},e.transitionDuration)}function F(t){c=void 0,s!==void 0&&(s(),s=void 0),(t===!0||d.value===!0)&&(Me(M),X(),z(y),H(x)),t!==!0&&(n=null)}function w(){(g.value!==null||e.scrollTarget!==void 0)&&(q.value=Fe(g.value,e.scrollTarget),V(q.value,m))}function ne(t){f!==!0?($e(v,t),l("click",t)):f=!1}function M(t){$.value===!0&&e.noFocus!==!0&&fe(u.value,t.target)!==!0&&S()}function x(t){l("escapeKey"),b(t)}function m(){Se({targetEl:u.value,offset:e.offset,anchorEl:g.value,anchorOrigin:E.value,selfOrigin:p.value,absoluteOffset:c,fit:e.fit,cover:e.cover,maxHeight:e.maxHeight,maxWidth:e.maxWidth})}function se(){return P(ce,G.value,()=>d.value===!0?P("div",{role:"menu",...r,ref:u,tabindex:-1,class:["q-menu q-position-engine scroll"+ee.value,r.class],style:[r.style,N.value],...te.value},re(h.default)):null)}return de(F),Object.assign(v,{focus:S,updatePosition:m}),Z}});export{Ie as Q,je as a};
